{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Process Node",
  "description": "A node in the process graph.  Nodes may represent activities, decisions or gates.",
  "type": "object",
  "properties": {
    "id": {"type": "string"},
    "kind": {"type": "string", "enum": ["activity", "decision", "gate"]},
    "description": {"type": ["string", "null"]},
    "produces": {
      "type": ["array", "null"],
      "items": {"type": "string"}
    },
    "consumes": {
      "type": ["array", "null"],
      "items": {"type": "string"}
    },
    "next": {
      "oneOf": [
        {"type": "string"},
        {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "when": {"type": "string"},
              "node": {"type": "string"}
            },
            "required": ["when", "node"]
          }
        }
      ]
    },
    "requires": {
      "type": ["array", "null"],
      "items": {"type": "object"}
    },
    "pass": {"type": ["string", "null"]},
    "fail": {"type": ["string", "null"]},
    "telemetry": {
      "type": ["array", "null"],
      "items": {"type": "string"}
    }
  },
  "required": ["id", "kind"]
}